<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Essential JS 1 : Model</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="../content/bootstrap.min.css" rel="stylesheet" />
    <link href="../content/ejthemes/default-theme/ej.web.all.min.css" rel="stylesheet" />
    <link href="../content/default.css" rel="stylesheet" />
    <link href="../content/default-responsive.css" rel="stylesheet" />
    <!--[if lt IE 9]>
         <script src="../scripts/jquery-1.11.3.min.js" type="text/javascript"></script>
     <!--<![endif]-->
    <!--[if gte IE 9]><!-->
    <script src="../scripts/jquery-3.4.1.min.js" type="text/javascript"></script>
    <!--<![endif]-->
    <script src="../scripts/jsrender.min.js"></script>
    <script src="../scripts/ej.web.all.min.js"></script>
    <script src="../scripts/properties.js" type="text/javascript"></script>
    <script src="../scripts/diagramscripts/diagramcommon.js"></script>
</head>
<body>
    <div class="content-container-fluid">
        <div class="row">
            <div class="cols-sample-area">
                <div id="diagram"></div>
            </div>
            <div id="sampleProperties">
                <div class="prop-grid">
                    <div class="row">
                        <div class="col-md-6">
                            <b>Model </b>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            Width
                        </div>
                        <div class="col-md-6">
                            <input type="text" id="width" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            Height
                        </div>
                        <div class="col-md-6">
                            <input type="text" id="height" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            Context Menu
                        </div>
                        <div class="col-md-6">
                            <input type="checkbox" id="cMenu" checked="checked" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            Background Color
                        </div>
                        <div class="col-md-6" id="bgColorr">
                            <input type="text" id="bgColor" />
                            <div id="bgColorDiv">
                                <ul>
                                    <li value="none">None</li>
                                    <li value="black">Black</li>
                                    <li value="whiteSmoke">WhiteSmoke</li>
                                    <li value="white">White</li>
                                    <li value="goldenrod">GoldenRod</li>
                                    <li value="indigo">Indigo</li>
                                    <li value="choclate">Choclate</li>
                                    <li value="darkgoldenrod">DarkGoldenRod</li>
                                    <li value="firebrick">FireBrick</li>
                                    <li value="darkred">DarkRed</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            Bridge Direction
                        </div>
                        <div class="col-md-6">
                            <input type="text" id="direction" />
                            <div id="directionlistDiv">
                                <ul>
                                    <li value="top">Top</li>
                                    <li value="bottom">Bottom</li>
                                    <li value="left">Left</li>
                                    <li value="right">Right</li>
                                    <li value="none">None</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            Constraints
                        </div>
                        <div class="col-md-6">
                            <select name="constraints" id="modelConstraints" onchange="constraintschecked()">
                                <option value="None">None</option>
                                <option value="PageEditable">PageEditable</option>
                                <option value="Zoomable">Zoom</option>
                                <option value="Pannable">Pan</option>
                                <option value="Undoable">Undo</option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <b>Background Image</b>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            Alignment
                        </div>
                        <div class="col-md-6">
                            <input type="text" id="alignment" />
                            <div id="alignmentdiv">
                                <ul>
                                    <li value="xminymin">xMinYMin</li>
                                    <li value="xminymid">xMinYMid</li>
                                    <li value="xmaxymax">xMaxYMax</li>
                                    <li value="xmidymin">xMidYMin</li>
                                    <li value="xmidymid">xMidYMid</li>
                                    <li value="xmidymax">xMidYMax</li>
                                    <li value="xmaxymin">xMaxYMin</li>
                                    <li value="xmaxymid">xMaxYMid</li>
                                    <li value="xminymax">xMinYMax</li>
                                    <li value="none">None</li>
                                </ul>
                            </div>

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            Scale
                        </div>
                        <div class="col-md-6">
                            <input type="text" id="scale" />
                            <div id="scalediv">
                                <ul>
                                    <li value="meet">Meet</li>
                                    <li value="slice">Slice</li>
                                    <li value="none">None</li>
                                </ul>
                            </div>

                        </div>

                    </div>
                </div>
            </div>

        </div>
    </div>


    <script type='text/javascript'>

        var FlowShapes = ej.datavisualization.Diagram.FlowShapes;
        var nodes = [
            { name: "node1",  offsetX: 400, offsetY: 30, fillColor: "#C44E5F", labels: [{ "text": "Start" }], shape: FlowShapes.Terminator },
            {
                name: "node2",  offsetX: 400, offsetY: 100, fillColor: "#5e5f5f", labels: [{ "text": "Design" }],
                shape: FlowShapes.Process, ports: [{ name: "designPort", offset: { x: 0, y: 0.5 } }]
            },
            {
                name: "node3",  offsetX: 400, offsetY: 180, fillColor: "#5e5f5f", labels: [{ "text": "Coding" }],
                shape: FlowShapes.Process, ports: [{ name: "codingPort", offset: { x: 0, y: 0.5 } }]
            },
            {
                name: "node4",  offsetX: 400, offsetY: 260, fillColor: "#5e5f5f", labels: [{ "text": "Testing" }], shape: FlowShapes.Process,
            },
            {
                name: "node5",  offsetX: 400, offsetY: 340, fillColor: "#4eab8b", labels: [{ "text": "Errors?" }], shape: FlowShapes.Decision,
            },
            {
                name: "node6",  offsetX: 400, offsetY: 450, fillColor: "#c44e5f", labels: [{ "text": "End" }], shape: FlowShapes.Terminator,
            },
            {
                name: "node7", width: 120, offsetX: 220, offsetY: 180, fillColor: "#4eab8b", labels: [{ "text": "Design Error?" }], type: "flow", shape: FlowShapes.Decision,
                ports: [
                    { name: "porterror", offset: { x: 0.5, y: 0 } },
                    { name: "portcoding", offset: { x: 1, y: 0.5 } },
                    { name: "portdesign", offset: { x: 0.5, y: 1 } }
                ]
            }
        ];

        var connectors = [
            { name: "connector1", sourceNode: "node1", targetNode: "node2" },
            { name: "connector2", sourceNode: "node2", targetNode: "node3" },
            { name: "connector3", sourceNode: "node3", targetNode: "node4" },
            { name: "connector4", sourceNode: "node4", targetNode: "node5" },
            {
                name: "connector5", sourceNode: "node5", targetNode: "node6",
		labels: [{ "text": "No", fillColor: "white" }]
            },
            {
                name: "connector6", sourceNode: "node5", targetNode: "node7",
		segments:[{type:"orthogonal" , length:150 , direction:"left"}],
                labels: [{ "text": "Yes", fillColor: "white" }]
            },
            {
                name: "connector7", sourceNode: "node7", targetNode: "node3", sourcePort: "portcoding", targetPort: "codingPort",
                segments: [{ type: "orthogonal", length: 10, direction: "left" }],
                labels: [{ "text": "No", fillColor: "white" }]
            },
            {
                name: "connector8", sourceNode: "node7", targetNode: "node2", sourcePort: "porterror", targetPort: "designPort",
                labels: [{ "text": "Yes", fillColor: "white" }]
            },
        ];

        $(function () {

            $("#diagram").ejDiagram({
                height: "500px",
                width: "100%",
                pageSettings: {
                    pageHeight: 500, pageWidth: 690, pageOrientation: "landscape",
                    pageBackgroundColor: "transparent", scrollLimit: ej.datavisualization.Diagram.ScrollLimit.Diagram
                },
                nodes: nodes,
                connectors: connectors,
                selectionChange: "selectionChanged",
                backgroundImage: { scale: ej.datavisualization.Diagram.ScaleConstraints.Meet, alignment: ej.datavisualization.Diagram.ImageAlignment.XMinYMid, source: "../content/images/diagram/Artboard 13.png" },
                defaultSettings: {
                    node: {
                        borderColor: "#000000", labels: [{ "fontColor": "white" }],
                        type:"flow", width : 90, height: 40
                    },
                    connector: {
                        segments: [{ "type": "orthogonal" }], lineWidth: 2,
                        constraints: ej.datavisualization.Diagram.ConnectorConstraints.Default | ej.datavisualization.Diagram.ConnectorConstraints.Bridging
                    }
                }
            });

            
            $("#direction").ejDropDownList({
                targetID: "directionlistDiv",
                text: "Top",
                value: "value",
                change: function changedirection(args) {
                    $("#diagram").ejDiagram({ bridgeDirection: args.value });
                },
                width: "110px"
            });

            
            $("#width").ejNumericTextbox({
                name: "diagramWidth",
                value: 690,
                width: "110px",
                change: function DiagramWidth(args) {
                    $("#diagram").ejDiagram({ width: args.value });
                }
            });

            $("#bgColor").ejDropDownList({
                targetID: "bgColorDiv",
                text: "None",
                value: "value",
                width: "110px",
                change: function changeColor(args) {
                    $("#diagram").ejDiagram({ backgroundColor: args.value });
                }
            });

            $("#alignment").ejDropDownList({
                targetID: "alignmentdiv",
                text: "xMinYMid",
                change: "changePreserveRatio",
                width: "110px"
            });

            $("#scale").ejDropDownList({
                targetID: "scalediv",
                text: "Meet",
                change: "changePreserveRatio",
                width: "110px"
            });

            $("#modelConstraints").ejDropDownList({
                customCssClass: "metroblue",
                showCheckbox: true,
                checkAll: false,
                selectedItems: [1, 2, 3, 4],
                change: "constraintschecked",
                width: "110px"
            });

            $('#cMenu').ejCheckBox({
                checked: true,
                change: function (args) {
                    $("#diagram").ejDiagram({ enableContextMenu: args.isChecked });
                }
            });

            $("#height").ejNumericTextbox({
                name: "diagramHeight",
                value: 500,
                width: "110px",
                change: function DiagramHeight(args) {
                    $("#diagram").ejDiagram({ height: args.value });
                }
            });

            //Property Panel
            $("#sampleProperties").ejPropertiesPanel();

        });


        function constraintschecked(args) {
            var diagram = $("#diagram").ejDiagram("instance");
            if (args.isChecked) {
                if (args.value === "None")
                    $("#diagram").ejDiagram({ constraints: ej.datavisualization.Diagram.DiagramConstraints.None });
                else
                    $("#diagram").ejDiagram({ constraints: ej.datavisualization.Diagram.DiagramConstraints.Default |ej.datavisualization.Diagram.DiagramConstraints[args.value] });
            }
            else {
                if (args.value === "None")
                    $("#diagram").ejDiagram({ constraints: ej.datavisualization.Diagram.DiagramConstraints.None });
                else
                    $("#diagram").ejDiagram({ constraints: ej.datavisualization.Diagram.DiagramConstraints.Default &~ ej.datavisualization.Diagram.DiagramConstraints[args.value] });
            }
        }

        function changePreserveRatio() {
            $("#diagram").ejDiagram({ backgroundImage: { alignment: alignment.value, scale: scale.value } });
        }

    </script>
</body>
</html>
