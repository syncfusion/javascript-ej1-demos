<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Essential JS 1 : Production Assembly</title>
    <link href="../content/ejthemes/default-theme/ej.web.all.min.css" rel="stylesheet" />
    <link href="../content/default.css" rel="stylesheet" />
    <link href="../content/samplecontent/diagram/productionassembly/productionassembly.css" rel="stylesheet" />
    <script src="../scripts/jquery-3.4.1.min.js" type="text/javascript"></script>
    <script src="../scripts/jsrender.min.js"></script>
    <script type="text/javascript" src="../scripts/diagramscripts/productionassembly.js"></script>
    <script src="../scripts/ej.web.all.min.js"></script>  
  
</head>
<body>
    <div id="basicDialog" title="Inventory" style="margin-top: 12px;display:none;">
        <table style="margin-left: 12px">

            <tr style="height: 40px">
                <td style="vertical-align: central">
                    <div style="height: 30px; width: 100%; font-size: 16px; margin-right: 60px">
                        Status
                    </div>
                </td>
                <td style="vertical-align: central">
                    <div style="height: 30px; width: 200px;">
                        <input type="text" id="ddlExportMode" style="width: 100px; text-indent: 8px;" />
                        <div id="modeDiv" style="text-align: right">
                            <ul style="background-color: lightgray">
                                <li>Active</li>
                                <li>Down</li>
                            </ul>
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <div style="height: 30px; margin-bottom: 6px; margin-top: 6px; width: 100%;">
                        <input type="button" id="btnExportDiagram" onclick="resetNode()" value="Reset" style="background-color: #28B1BF; border: medium none; color: #FFFFFF; font-family: Segoe UI; font-size: 16px; height: 29px; width: 90px;" />
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <div class="content-container-fluid">
        <div class="row">
            <div class="cols-sample-area">
                <div id="diagram"></div>
            </div>
        </div>
    </div>

    <script type="text/javascript">

        var nodes = [
              backToHome = createNativeNode("fromEnginPlant", 100, 80, 00, 300, "Production_Load", "From Engine", "top"),
              fromEnginPlant = createNativeNode("fromChassisPlant", 100, 80, 00, 450, "Production_Load", "From Chassis", "top"),
              fromChassisPlant = createNativeNode("todistribution", 100, 80, 800, 780, "Production_Load", "To distribution", "bottom"),
              todistribution = createNativeNode("Production_Home", 100, 80, 1380, 0, "Production_Home", "Home", "bottom"),
                {
                    name: "group1", type: "group",
                    children: [
                        createNode("bigrect1", 230, 230, 200, 190, null, null, null, "whitesmoke"),
                        createNativeNode("smallrect1", 90, 90, 143, 200, "Production_Paint_Green"),
                        createNode("ellipse1", 115, 40, 150, 50, null, "Frame Assy", 20, "#FF7620"),
                        createNativeNode("flag1", 30, 45, 180, 110, "Production_CriticallyLow", null, null, null, "white"),
                        createNativeNode("tick1", 35, 35, 290, 105, "Production_Active", null, null, null, "white"),
                        createNativeNode("switch", 25, 15, 280, 60, "Production_Optimal"),
                        createNode("rect1", 230, 45, 200, 280, null, null, null, "lightgrey", 0.9),
                        createNativeNode("inner_object", 50, 80, 265, 200, "stProduction_Frameassy"),
                    ],

                },
                {
                    name: "group2", type: "group",
                    children: [
                        createNode("bigrect2", 230, 230, 500, 190, null, null, null, "whitesmoke"),
                        createNode("ellipse2", 110, 40, 450, 50, null, "Electical", 20, "#FF7620"),
                        createNativeNode("smallrect2", 90, 90, 442, 200, "Production_Paint_Yellow"),
                        createNativeNode("flag2", 30, 45, 480, 110, "Production_CriticallyLow", null, null, null, "white"),
                        createNativeNode("tick2", 35, 35, 590, 105, "Production_Down", null, null, null, "white"),
                        createNativeNode("switch2", 25, 15, 580, 60, "Production_Optimal"),
                        createNode("rect2", 230, 45, 500, 280, null, null, null, "lightgrey", 0.9),
                        createNativeNode("inner_object2", 50, 80, 565, 200, "Production_Internal"),
                    ]
                },
                {
                    name: "group3", type: "group",
                    children: [
                        createNode("bigrect3", 230, 230, 800, 190, null, null, null, "whitesmoke"),
                        createNode("ellipse3", 110, 40, 750, 50, null, "Bears", 20, "#FF7620"),
                        createNativeNode("smallrect3", 90, 90, 742, 200, "Production_Paint_Green"),
                        createNativeNode("flag3", 30, 45, 790, 110, "Production_CriticallyLow", null, null, null, "white"),
                        createNativeNode("tick3", 35, 35, 880, 105, "Production_Down", null, null, null, "white"),
                        createNativeNode("switch3", 25, 15, 880, 60, "Production_Optimal"),
                        createNode("rect3", 230, 45, 800, 280, null, null, null, "lightgrey", 0.9),
                        createNativeNode("inner_object3", 50, 80, 865, 200, "Production_Break"),
                    ]
                },
                {
                    name: "group4", type: "group",
                    children: [
                        createNode("bigrect4", 230, 230, 1100, 190, null, null, null, "whitesmoke"),
                        createNode("ellipse4", 130, 40, 1050, 50, null, "Transmission", 20, "#FF7620"),
                        createNativeNode("smallrect4", 90, 90, 1042, 200, "Production_Paint_Green"),
                        createNativeNode("flag4", 30, 45, 1090, 110, "Production_CriticallyLow", null, null, null, "white"),
                        createNativeNode("tick4", 35, 35, 1180, 105, "Production_Active", null, null, null, "white"),
                        createNativeNode("switch4", 25, 15, 1180, 60, "Production_Optimal"),
                        createNode("rect4", 230, 45, 1100, 280, null, null, null, "lightgrey", 0.9),
                        createNativeNode("inner_object4", 50, 80, 1165, 200, "Production_Transmission"),
                    ]
                },
                {
                    name: "group5", type: "group",
                    children: [
                    createNode("bigrect5", 230, 230, 560, 480, null, null, null, "whitesmoke"),
                    createNativeNode("smallrect5", 90, 90, 502, 490, "Production_Paint_Green"),
                    createNode("ellipse5", 130, 40, 500, 340, null, "Engine filter", 20, "#FF7620"),
                    createNativeNode("flag5", 30, 45, 550, 400, "Production_CriticallyLow", null, null, null, "white"),
                    createNativeNode("tick5", 35, 35, 650, 400, "Production_Down", null, null, null, "white"),
                    createNativeNode("switch5", 25, 15, 645, 350, "Production_Optimal"),
                    //createNode("rect5", 45, 230, 360, 580, null, null, null, "lightgrey", 1),
                    createNativeNode("inner_object5", 50, 80, 623, 490, "Production_engineFitting"),
                    ]
                },
                {
                    name: "group6", type: "group",
                    children: [
                    createNode("bigrect6", 230, 230, 950, 480, null, null, null, "whitesmoke"),
                    createNativeNode("smallrect6", 90, 90, 892, 490, "Production_Paint_Green"),
                    createNode("ellipse6", 110, 40, 900, 340, null, "Seats", 20, "#FF7620"),
                    createNativeNode("flag6", 30, 45, 947, 400, "Production_CriticallyLow", null, null, null, "white"),
                    createNativeNode("tick6", 35, 35, 1030, 400, "Production_Active", null, null, null, "white"),
                    createNativeNode("switch6", 25, 15, 1030, 350, "Production_Optimal"),
                    createNode("rect6", 227, 45, 950, 570, null, null, null, "lightgrey", 0.9),
                    createNativeNode("inner_object6", 50, 80, 1017, 490, "seat_Assembly"),
                    ]
                },
                {
                    name: "group7", type: "group",
                    children: [
                    createNode("bigrect7", 230, 230, 1320, 440, null, null, null, "whitesmoke"),
                    createNativeNode("smallrect7", 90, 90, 1380, 500, "Production_Paint_Yellow"),
                    createNode("ellipse7", 110, 40, 1315, 300, null, "Interior", 20, "#FF7620"),
                    createNativeNode("flag7", 30, 45, 1410, 420, "Production_StockPiled", null, null, null, "white"),
                    createNativeNode("tick7", 35, 35, 1407, 350, "Production_Down", null, null, null, "white"),
                    createNativeNode("switch7", 25, 15, 1405, 310, "Production_Optimal"),
                    createNode("rect7", 45, 230, 1230, 440, null, null, null, "lightgrey", 0.9),
                    createNativeNode("inner_object7", 50, 80, 1295, 440, "Production_Internal"),
                    ]
                },
                {
                    name: "group8", type: "group",
                    children: [
                    createNode("bigrect8", 230, 230, 290, 700, null, null, null, "whitesmoke"),
                    createNativeNode("smallrect8", 90, 90, 230, 700, "Production_Panit_Red"),
                    createNode("ellipse8", 110, 40, 230, 560, null, "Paint", 20, "#FF7620"),
                    createNativeNode("flag8", 30, 45, 260, 620, "Production_CriticallyLow", null, null, null, "white"),
                    createNativeNode("tick8", 35, 35, 340, 620, "Production_Active", null, null, null, "white"),
                    createNativeNode("switch8", 25, 15, 340, 573, "Production_Optimal"),
                    createNode("rect8", 230, 45, 560, 569, null, null, null, "lightgrey", 0.9),
                    createNativeNode("inner_object8", 50, 80, 320, 760, "paint_Assembly"),
                    ]
                },
                {
                    name: "group9", type: "group",
                    children: [
                      createNode("bigrect9", 230, 230, 540, 760, null, null, null, "whitesmoke"),
                      createNativeNode("smallrect9", 90, 90, 545, 750, "Production_QualityCheck"),
                      createNode("ellipse9", 135, 40, 490, 620, null, "Quality check", 20, "#FF7620"),
                      createNode("rect9", 230, 45, 540, 850, null, null, null, "lightgrey", 1),
                      createNode("rect5", 45, 230, 380, 700, null, null, null, "lightgrey", 1),
                      createNativeNode("tick9", 35, 35, 620, 670, "Production_Active", null, null, null, "white"),
                      createNativeNode("switch9", 25, 15, 620, 630, "Production_Optimal"),
                    ]
                },
                {
                    name: "group10", type: "group",
                    children: [
                        { name: "bigrect10", width: 510, height: 50, offsetX: 1160, offsetY: 900, labels: [{ text: "LEGEND", bold: true, fontSize: 18, fontFamily: "segoe UI" }], fillColor: "#42b9f4" },
                        { name: "inventcount", width: 170, height: 220, offsetX: 990, offsetY: 1025, labels: [{ text: "Inventory count", bold: true, fontSize: 18, fontFamily: "segoe UI", offset: { x: 0.5, y: 0.1 } }] },
                        { name: "Stationstatus", width: 170, height: 220, offsetX: 1160, offsetY: 1025, labels: [{ text: "Status Section", bold: true, fontSize: 18, fontFamily: "segoe UI", offset: { x: 0.5, y: 0.1 } }] },
                        { name: "Processingtime", width: 170, height: 220, offsetX: 1330, offsetY: 1025, labels: [{ text: "Processing Time", bold: true, fontSize: 18, fontFamily: "segoe UI", offset: { x: 0.5, y: 0.1 } }] },
                    ]
                },

          createNativeNode("Production_Critically_Low", 30, 45, 930, 995, "Production_CriticallyLow", "Critical", "right", null, "white"),
          createNativeNode("Production_WithinLimits", 30, 45, 930, 1045, "Production_WithinLimits", "Within limits", "right", null, "white"),
          createNativeNode("Production_StockPiled", 30, 45, 930, 1095, "Production_StockPiled", "Stockpill", "right", null, "white"),
          createNativeNode("Production_Down", 35, 35, 1110, 995, "Production_Down", "Down", "right", null, "white"),
          createNativeNode("Production_Active", 35, 35, 1110, 1045, "Production_Active", "Active", "right", null, "white"),
          createNativeNode("Production_Optimal", 25, 15, 1270, 995, "Production_Optimal", "Optimal ", "right"),
          createNativeNode("Production_Non", 25, 15, 1270, 1040, "Production_Non", "Non-optimal ", "right"),
        ];

        var inventory = createNode("Inventory", 40, 40, 50, 1000, "ellipse");
        inventory.fillColor = "#9ABEE8";
        inventory.labels = [{ text: "Inventory", fontSize: 22, fontColor: "black", bold: true, horizontalAlignment: "left", offset: { x: 1.2, y: .5 }, wrapping: ej.datavisualization.Diagram.TextWrapping.NoWrap }];
        nodes.push(inventory);

        var StationStatus = createNode("StationStatus", 40, 40, 50, 1050, "ellipse");
        StationStatus.fillColor = "#9ABEE8";
        StationStatus.labels = [{ text: "Station Status", fontSize: 22, fontColor: "black", bold: true, horizontalAlignment: "left", offset: { x: 1.2, y: .5 }, wrapping: ej.datavisualization.Diagram.TextWrapping.NoWrap }];
        nodes.push(StationStatus);

        var Assemblylinelayout = createNode("Assemblylinelayout", 40, 40, 50, 1100, "ellipse");
        Assemblylinelayout.fillColor = "#9ABEE8";
        Assemblylinelayout.labels = [{ text: "Assembly Line Layout", fontSize: 22, fontColor: "black", horizontalAlignment: "left", bold: true, offset: { x: 1.2, y: .5 }, wrapping: ej.datavisualization.Diagram.TextWrapping.NoWrap }];
        nodes.push(Assemblylinelayout);



        function onDialogClose() {
            $("#basicDialog").ejDialog("close");
            publicNode = null;
        }
        var publicNode;
        function resetNode() {
            var diargam = $("#diagram").ejDiagram("instance");
            var value = $('#ddlExportMode').ejDropDownList("instance")._selectedValue;
            diargam.updateNode(publicNode.name, { templateId: value === "Active" ? "Production_Active" : "Production_Down" })
            $("#basicDialog").ejDialog("close");
        }
        $(function () {
            $("#diagram").ejDiagram({
                width: "100%",
                height: "650px",
                connectors: [
                   { name: "ortho", sourcePoint: { x: 80, y: 280 }, targetPoint: { x: 700, y: 775 }, cornerRadius: 20, lineColor: "lightgrey", lineWidth: 40, segments: [{ type: "orthogonal", direction: "right", length: 1150 }, { type: "orthogonal", direction: "bottom", length: 290 }, { type: "orthogonal", direction: "left", length: 850 }, { type: "orthogonal", direction: "bottom", length: 280 }, { type: "orthogonal", direction: "right", length: 300 }], targetDecorator: { shape: "none" }, zOrder: 0 },
                ],
                nodes: nodes,
                pageSettings: {
                    scrollLimit: "diagram"
                },
                snapSettings: {
                    snapConstraints: ej.datavisualization.Diagram.SnapConstraints.None
                },
                defaultSettings: {
                },
                click: function (args) {

                    if (args.actualObject) {
                        var state = (args.actualObject.name).indexOf("tick");
                        if (state != -1) {
                            var value = (args.actualObject.templateId === "Production_Active") ? "Active" : "Down";
                            $('#ddlExportMode').ejDropDownList({
                                value: value
                            });
                            $("#basicDialog").ejDialog("open");
                            publicNode = args.actualObject;
                        }
                    }
                },
                create: function () {
                    var diargam = $("#diagram").ejDiagram("instance");
                    diargam.add(createNativeNode("car1", 80, 40, 200, 280, "Production_Car"));
                    diargam.add(createNativeNode("car3", 80, 40, 500, 280, "Production_Car"));
                    diargam.add(createNativeNode("car4", 80, 40, 800, 280, "Production_Car"));
                    diargam.add(createNativeNode("car5", 80, 40, 1100, 280, "Production_Car"));
                    diargam.add(createNativeNode("car6", 80, 40, 1230, 440, "Production_Car", null, null, 90));
                    diargam.add(createNativeNode("car7", 80, 40, 950, 570, "Production_Car", null, null, 180));
                    diargam.add(createNativeNode("car9", 80, 40, 560, 570, "Production_Car", null, null, 180));
                    diargam.add(createNativeNode("car10", 80, 40, 380, 730, "Production_Car", null, null, 90));
                    diargam.add(createNativeNode("car11", 80, 40, 540, 850, "Production_Car"));
                    diargam.clearSelection();
                    diargam.fitToPage();
                    diargam.model.constraints = ej.datavisualization.Diagram.DiagramConstraints.None;
                }
            });


            $("#basicDialog").ejDialog({
                width: 400,
                minWidth: 400,
                minHeight: 180,
                close: "onDialogClose",
                enableModal: true,
                showOnInit: false,
            });

            $('#ddlExportMode').ejDropDownList({
                targetID: "modeDiv",
                width: "200px",
                height: "30px",
                popupHeight: "59px",
                selectedItems: [0],
                cssClass: "ddl-standard"
            });

        });

        function createNode(name, width, height, offsetX, offsetY, shape, text, corner, fillColor, opacity) {
            var node = {};
            node.name = name;
            node.width = width;
            node.height = height;
            node.offsetX = offsetX;
            node.offsetY = offsetY;
            node.fillColor = fillColor || "white";
            node.cornerRadius = corner || 0;
            node.labels = [{ text: text, fontSize: 18, fontFamily: "segoe UI", fontColor: "white", bold: true }]
            node.type = "basic";
            node.opacity = opacity || 1;
            node.borderColor = "transparent";
            if (shape) {
                node.shape = shape;
            }
            else {
                node.shape = "rectangle";
            }
            return node;
        }
        function createNativeNode(name, width, height, offsetX, offsetY, id, text, position, angle, border) {
            var node = {};
            node.name = name;
            node.width = width;
            node.height = height;
            node.offsetX = offsetX;
            node.offsetY = offsetY;
            node.rotateAngle = angle ? angle : 0;
            node.type = "native";
            node.templateId = id;
            node.scale = "stretch";
            if (border)
                node.borderColor = border
            else
                node.borderColor = "gray";
            var fontColor = "black";
            var horizontalAlignment = "center";
            var fontsize = 22;
            if (position === "top")
                var offset = { x: .5, y: -.45 }
            else if (position === "bottom")
                var offset = { x: .5, y: 1.49 }
            else if (position === "right") {
                var offset = { x: 1.1, y: .5 }
                horizontalAlignment = "left";
                fontColor = "black"
                fontsize = 18;
            }
            node.labels = [{ text: text, fontSize: 18, fontFamily: "segoe UI", fontColor: fontColor, bold: true, offset: offset, horizontalAlignment: horizontalAlignment, wrapping: ej.datavisualization.Diagram.TextWrapping.NoWrap }]
            return node;
        }
    </script>
</body>
</html>